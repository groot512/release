<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜ì„±êµ° ìŠ¤ë§ˆíŠ¸ ì¬ë‚œì•ˆì „ í†µí•© ê´€ì œ</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --primary: #008939;   /* ì˜ì„± ê·¸ë¦° */
            --primary-dark: #00682b;
            --secondary: #2c3e50; /* ë‹¤í¬ ë„¤ì´ë¹„ */
            --accent: #E84638;    /* ê²½ê³  ë ˆë“œ */
            --bg-body: #f3f4f6;   /* ë°ì€ ê·¸ë ˆì´ ë°°ê²½ */
            --bg-card: #ffffff;   /* ì¹´ë“œ í°ìƒ‰ ë°°ê²½ */
            --text-main: #111827;
            --text-sub: #6b7280;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* --- Sidebar --- */
        .sidebar {
            width: 260px;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            padding: 20px;
            z-index: 10;
        }

        .logo {
            font-size: 22px;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 40px;
        }

        .menu-item {
            padding: 12px 15px;
            border-radius: 10px;
            color: var(--text-sub);
            font-weight: 500;
            margin-bottom: 5px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .menu-item:hover {
            background-color: #f0fdf4;
            color: var(--primary);
        }

        .menu-item.active {
            background-color: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 137, 57, 0.3);
        }

        .menu-item i { width: 20px; text-align: center; }

        .emergency-trigger {
            margin-top: auto;
            background: #fee2e2;
            color: var(--accent);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-weight: 700;
            cursor: pointer;
            border: 1px solid #fecaca;
            transition: 0.3s;
        }
        .emergency-trigger:hover { background: var(--accent); color: white; }

        /* --- Main Content Area --- */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* Page Container (SPA Logic) */
        .page-container {
            flex: 1;
            display: none; /* Hidden by default */
            flex-direction: column;
            overflow-y: auto;
            height: 100%;
        }
        .page-container.active { display: flex; }

        /* Header */
        header {
            background: var(--bg-card);
            padding: 15px 30px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title h1 { font-size: 20px; font-weight: 700; }
        .header-title p { font-size: 13px; color: var(--text-sub); }

        .header-status {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            background: #dcfce7;
            color: var(--primary);
        }

        /* --- Page 1: Dashboard Styles --- */
        .dashboard-container {
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: auto auto 1fr;
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }

        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        /* Stats */
        .stat-card {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 140px;
        }
        .stat-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px; }
        .stat-icon { 
            width: 40px; height: 40px; 
            background: #f3f4f6; border-radius: 10px; 
            display: flex; align-items: center; justify-content: center;
            color: var(--primary); font-size: 18px;
        }
        .stat-value { font-size: 28px; font-weight: 700; color: var(--text-main); }
        .stat-label { font-size: 14px; color: var(--text-sub); }
        .stat-trend { font-size: 12px; color: var(--primary); font-weight: 600; margin-top: 5px; }

        /* Map */
        .map-card {
            grid-column: span 3;
            grid-row: span 2;
            position: relative;
            overflow: hidden;
            min-height: 500px;
            padding: 0; 
        }
        .map-frame {
            width: 100%; height: 100%;
            background-image: url('https://www.usc.go.kr/design/ko/img/content/tourmap_06.png'); 
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-color: #eef2ff;
            position: relative;
        }
        .map-overlay-ui {
            position: absolute; top: 20px; left: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px; border-radius: 12px;
            box-shadow: var(--shadow); backdrop-filter: blur(4px); z-index: 5;
        }

        /* List & Table */
        .list-card { grid-column: span 1; grid-row: span 2; display: flex; flex-direction: column; }
        .table-card { grid-column: span 4; overflow-x: auto; }

        .cctv-item {
            display: flex; align-items: center; gap: 12px; padding: 12px 0;
            border-bottom: 1px solid #f3f4f6; cursor: pointer; transition: 0.2s;
        }
        .cctv-item:hover { background: #f9fafb; padding-left: 5px; }
        .cctv-thumb { width: 60px; height: 40px; background: #000; border-radius: 6px; overflow: hidden; display: flex; align-items: center; justify-content: center; color: #94a3b8; font-size: 10px; }
        .cctv-info h4 { font-size: 14px; margin-bottom: 2px; }
        .cctv-info p { font-size: 12px; color: var(--text-sub); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #22c55e; margin-left: auto; }

        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        th { text-align: left; padding: 15px; color: var(--text-sub); border-bottom: 1px solid var(--border); font-weight: 500; }
        td { padding: 15px; border-bottom: 1px solid #f3f4f6; color: var(--text-main); }
        .tag { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: 600; }
        .tag.normal { background: #dcfce7; color: #166534; }
        .tag.warning { background: #ffedd5; color: #9a3412; }
        .tag.danger { background: #fee2e2; color: #991b1b; }

        /* --- Page 2: CCTV Monitoring Styles --- */
        .cctv-page-layout {
            display: grid;
            grid-template-columns: 1fr 320px;
            height: 100%;
            overflow: hidden;
        }

        .video-grid-container {
            padding: 20px;
            overflow-y: auto;
            background: #e2e8f0;
        }

        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            align-items: center;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 14px;
            color: var(--text-main);
            outline: none;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3x3 Layout */
            gap: 15px;
        }

        .video-feed {
            background: black;
            aspect-ratio: 16/9;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
            transition: 0.2s;
            cursor: pointer;
        }

        .video-feed:hover, .video-feed.selected {
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(0, 137, 57, 0.2);
        }

        .feed-overlay {
            position: absolute;
            top: 10px; left: 10px;
            color: white;
            font-size: 12px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
            z-index: 2;
        }
        .rec-dot {
            width: 8px; height: 8px; background: red; border-radius: 50%;
            display: inline-block; margin-right: 5px;
            animation: blink 1s infinite;
        }
        .feed-placeholder {
            width: 100%; height: 100%;
            object-fit: cover;
            opacity: 0.7;
        }

        .control-panel-side {
            background: white;
            border-left: 1px solid var(--border);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .ptz-controller {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .ptz-pad {
            width: 120px; height: 120px;
            background: #e2e8f0;
            border-radius: 50%;
            margin: 0 auto 15px;
            position: relative;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .ptz-btn {
            position: absolute;
            width: 30px; height: 30px;
            background: white;
            border-radius: 50%;
            border: 1px solid #cbd5e1;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            color: var(--text-sub);
            transition: 0.2s;
        }
        .ptz-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }
        .ptz-btn.up { top: 5px; left: 50%; transform: translateX(-50%); }
        .ptz-btn.down { bottom: 5px; left: 50%; transform: translateX(-50%); }
        .ptz-btn.left { left: 5px; top: 50%; transform: translateY(-50%); }
        .ptz-btn.right { right: 5px; top: 50%; transform: translateY(-50%); }
        .ptz-btn.center { 
            top: 50%; left: 50%; transform: translate(-50%, -50%); 
            width: 40px; height: 40px; background: #cbd5e1;
        }

        .zoom-controls {
            display: flex; justify-content: center; gap: 10px;
        }
        .btn-zoom {
            padding: 8px 16px;
            background: white; border: 1px solid var(--border);
            border-radius: 6px; cursor: pointer; font-size: 14px;
        }
        .btn-zoom:active { background: #f1f5f9; }

        /* --- Page 3: Water Level Styles --- */
        .water-chart-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
            height: 400px;
            margin-bottom: 20px;
        }
        .level-cards {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 20px;
        }
        .level-card {
            background: white; padding: 20px; border-radius: 12px; border: 1px solid var(--border);
            display: flex; align-items: center; gap: 15px;
        }
        .level-icon { font-size: 24px; color: #3b82f6; background: #eff6ff; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }

        /* --- Page 4: Alerts & SOP Styles --- */
        .sop-container {
            display: none; /* Hidden normally */
            margin-top: 20px;
        }
        .sop-flow {
            display: flex; gap: 10px; margin-bottom: 30px;
        }
        .sop-step {
            flex: 1; background: white; padding: 20px; border-radius: 8px; border: 1px solid var(--border);
            position: relative; opacity: 0.5; transition: 0.3s;
        }
        .sop-step.active {
            border-color: var(--accent); opacity: 1; box-shadow: 0 4px 12px rgba(232, 70, 56, 0.2);
        }
        .sop-step h4 { color: var(--text-main); margin-bottom: 5px; }
        .sop-step p { font-size: 12px; color: var(--text-sub); }
        .sop-step::after {
            content: 'â†’'; position: absolute; right: -15px; top: 50%; transform: translateY(-50%); color: #cbd5e1; font-size: 20px;
        }
        .sop-step:last-child::after { content: ''; }

        .alert-action-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
        }
        .alert-box {
            background: white; border: 1px solid var(--border); padding: 20px; border-radius: 12px;
        }

        /* --- Page 5: Report Styles --- */
        .report-mode-badge {
            display: inline-block; padding: 5px 10px; border-radius: 4px; font-size: 12px; font-weight: 700; margin-bottom: 10px;
        }
        .report-normal { background: #dcfce7; color: var(--primary); }
        .report-emergency { background: #fee2e2; color: var(--accent); }

        /* Effects */
        @keyframes blink { 50% { opacity: 0.5; } }
        body.emergency-mode .status-badge { background: #fee2e2; color: #991b1b; animation: blink 1s infinite; }
        body.emergency-mode .map-frame { filter: sepia(20%) hue-rotate(-30deg) saturate(150%); }
        body.emergency-mode .stat-value.danger-text { color: var(--accent); }

        /* Responsive */
        @media (max-width: 1400px) {
            .video-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 1200px) {
            .dashboard-container { grid-template-columns: repeat(2, 1fr); }
            .map-card, .list-card, .table-card { grid-column: span 2; }
            .cctv-page-layout { grid-template-columns: 1fr; }
            .control-panel-side { display: none; }
        }
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .dashboard-container { grid-template-columns: 1fr; padding: 15px; }
            .map-card, .list-card, .table-card { grid-column: span 1; }
            .level-cards { grid-template-columns: 1fr; }
            .sop-flow { flex-direction: column; }
            .sop-step::after { display: none; }
        }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-layer-group"></i> Smart Uiseong
        </div>
        <div class="menu-item active" id="menu-dashboard" onclick="showPage('dashboard')">
            <i class="fa-solid fa-chart-pie"></i> í†µí•© ê´€ì œ ëŒ€ì‹œë³´ë“œ
        </div>
        <div class="menu-item" id="menu-cctv" onclick="showPage('cctv')">
            <i class="fa-solid fa-video"></i> ì§€ëŠ¥í˜• CCTV ëª¨ë‹ˆí„°ë§
        </div>
        <div class="menu-item" id="menu-water" onclick="showPage('water')">
            <i class="fa-solid fa-water"></i> í•˜ì²œ/ì €ìˆ˜ì§€ ìˆ˜ìœ„
        </div>
        <div class="menu-item" id="menu-alert" onclick="showPage('alert')">
            <i class="fa-solid fa-triangle-exclamation"></i> ì¬ë‚œ ì˜ˆë³´/ê²½ë³´
        </div>
        <div class="menu-item" id="menu-report" onclick="showPage('report')">
            <i class="fa-solid fa-file-contract"></i> ìœ ì§€ê´€ë¦¬ ë³´ê³ ì„œ
        </div>
        
        <div class="emergency-trigger" onclick="toggleEmergency()">
            <i class="fa-solid fa-bell"></i> ì¬ë‚œ ì‹œë®¬ë ˆì´ì…˜
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <header>
            <div class="header-title">
                <h1>ë””ì§€í„¸íŠ¸ìœˆ ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ì¬ë‚œì•ˆì „ê´€ë¦¬ í”Œë«í¼</h1>
                <p>ì˜ì„±êµ°ì²­ ì•ˆì „ê±´ì„¤ê³¼ | í†µí•©ê´€ì œì„¼í„° ì‹¤ì‹œê°„ ë°ì´í„° ì—°ë™</p>
            </div>
            <div class="header-status">
                <div style="text-align: right;">
                    <div id="clock" style="font-weight: 700; font-size: 16px;">00:00:00</div>
                    <div style="font-size: 12px; color: var(--text-sub);">2025ë…„ 12ì›” 16ì¼ í™”ìš”ì¼</div>
                </div>
                <div class="status-badge" id="systemStatus">
                    <i class="fa-solid fa-circle-check"></i> ì •ìƒ ìš´ì˜ ì¤‘
                </div>
                <div style="width: 40px; height: 40px; border-radius: 50%; background: #e5e7eb; overflow: hidden; display:flex; align-items:center; justify-content:center; color:white;">
                    <i class="fa-solid fa-user" style="color:#94a3b8;"></i>
                </div>
            </div>
        </header>

        <!-- PAGE 1: Integrated Dashboard -->
        <div id="page-dashboard" class="page-container active">
            <div class="dashboard-container">
                <!-- 1. ê¸°ìƒ ì •ë³´ -->
                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">ê¸°ìƒì²­ ì—°ë™ (ì˜ì„±ì)</span>
                        <div class="stat-icon"><i class="fa-solid fa-cloud-sun"></i></div>
                    </div>
                    <div class="stat-value" id="weatherTemp">24.5Â°C</div>
                    <div class="stat-trend">ê°•ìˆ˜í™•ë¥  10% â€¢ ìŠµë„ 45%</div>
                </div>

                <!-- 2. ê°•ìš°ëŸ‰ -->
                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">ì‹¤ì‹œê°„ ê°•ìš°ëŸ‰ (í‰ê· )</span>
                        <div class="stat-icon" style="color:#3b82f6;"><i class="fa-solid fa-umbrella"></i></div>
                    </div>
                    <div class="stat-value" id="rainAmount">0.0mm</div>
                    <div class="stat-trend" id="rainTrend">â–¼ í‰ë…„ ëŒ€ë¹„ ê±´ì¡°</div>
                </div>

                <!-- 3. í•˜ì²œ ìˆ˜ìœ„ -->
                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">ì£¼ìš” í•˜ì²œ ìˆ˜ìœ„ (ë‚¨ëŒ€ì²œ)</span>
                        <div class="stat-icon" style="color:#3b82f6;"><i class="fa-solid fa-water"></i></div>
                    </div>
                    <div class="stat-value" id="waterLevel">1.2m</div>
                    <div class="stat-trend">ê´€ì‹¬ë‹¨ê³„(3.5m) ì´í•˜ ì•ˆì •</div>
                </div>

                <!-- 4. CCTV ê°€ë™ë¥  -->
                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">CCTV í†µí•© ê°€ë™ í˜„í™©</span>
                        <div class="stat-icon" style="color:var(--primary);"><i class="fa-solid fa-video"></i></div>
                    </div>
                    <div class="stat-value">839<span style="font-size:16px; color:var(--text-sub);">/839</span></div>
                    <div class="stat-trend">ê°€ë™ë¥  100% â€¢ ì¥ì•  0ê±´</div>
                </div>

                <!-- 5. Main Map -->
                <div class="card map-card">
                    <div class="map-frame">
                        <!-- Markers -->
                        <div style="position: absolute; top: 48%; left: 45%; transform: translate(-50%, -50%); text-align: center;">
                             <i class="fa-solid fa-building-columns" style="font-size: 24px; color: var(--primary); filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));"></i>
                             <div style="background: white; padding: 2px 6px; border-radius: 4px; font-size: 11px; font-weight: 700; margin-top: 2px; border:1px solid #ddd;">êµ°ì²­</div>
                        </div>
                        <div id="disasterMarker" style="position: absolute; top: 52%; left: 48%; display: none;">
                            <div style="width: 80px; height: 80px; background: rgba(232, 70, 56, 0.4); border-radius: 50%; animation: pulse 1.5s infinite; position: absolute; top:50%; left:50%; transform:translate(-50%, -50%);"></div>
                            <i class="fa-solid fa-water" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 20px; color: var(--accent); z-index:2;"></i>
                        </div>
                    </div>
                    <div class="map-overlay-ui">
                        <h4 style="font-size: 14px; margin-bottom: 5px;">AI ì˜ˆì¸¡ ì‹œë®¬ë ˆì´ì…˜</h4>
                        <p id="aiStatus" style="font-size: 12px; color: var(--text-sub);">í˜„ì¬ ìœ„í—˜ ìš”ì¸ì´ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>

                <!-- 6. CCTV List (Compact) -->
                <div class="card list-card">
                    <div class="list-header">
                        <span>ì£¼ìš” ê°ì‹œ êµ¬ì—­</span>
                        <span style="font-size: 12px; color: var(--primary); cursor: pointer;" onclick="showPage('cctv')">+ ì „ì²´ë³´ê¸°</span>
                    </div>
                    <div style="overflow-y: auto; height: 100%;">
                        <div class="cctv-item">
                            <div class="cctv-thumb">LIVE</div>
                            <div class="cctv-info"><h4>ì•ˆê³„-03 (ìš©ê¸°ë¦¬)</h4><p>ë°©ë²”ìš© â€¢ ì •ìƒ</p></div>
                            <div class="status-dot"></div>
                        </div>
                        <div class="cctv-item">
                            <div class="cctv-thumb">LIVE</div>
                            <div class="cctv-info"><h4>ë´‰ì–‘-01 (í™”ì „ë¦¬)</h4><p>ì¬ë‚œê°ì‹œ â€¢ ì •ìƒ</p></div>
                            <div class="status-dot"></div>
                        </div>
                        <div class="cctv-item">
                            <div class="cctv-thumb">LIVE</div>
                            <div class="cctv-info"><h4>ì ê³¡-02 (ì‚¬ì´Œë¦¬)</h4><p>ì‚°ë¶ˆê°ì‹œ â€¢ ì •ìƒ</p></div>
                            <div class="status-dot"></div>
                        </div>
                    </div>
                </div>

                <!-- 7. Table -->
                <div class="card table-card">
                    <div class="list-header">
                        <span>IoT ì„¼ì„œ ì‹¤ì‹œê°„ ë°ì´í„°</span>
                        <button style="border:none; background:none; color:var(--text-sub); font-size:12px;"><i class="fa-solid fa-rotate-right"></i> ê°±ì‹ </button>
                    </div>
                    <table>
                        <thead>
                            <tr><th>ì„¼ì„œ ID</th><th>ì„¤ì¹˜ ìœ„ì¹˜</th><th>ìœ í˜•</th><th>í˜„ì¬ ì¸¡ì •ê°’</th><th>ìƒíƒœ</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>UIS-IOT-001</td><td>ì•ˆê³„ë©´ ìœ„ì–‘ë¦¬ 479-2</td><td>ê°•ìš°ëŸ‰ê³„</td><td class="sensor-val">0mm/h</td><td><span class="tag normal">ì •ìƒ</span></td></tr>
                            <tr><td>UIS-IOT-024</td><td>ë´‰ì–‘ë©´ í™”ì „ë¦¬ 115-2</td><td>í•˜ì²œìˆ˜ìœ„ê³„</td><td class="sensor-val-level">1.15m</td><td><span class="tag normal">ì •ìƒ</span></td></tr>
                            <tr><td>UIS-IOT-056</td><td>ì˜ì„±ì ë‚¨ëŒ€ì²œ êµëŸ‰</td><td>ìˆ˜ìœ„ê°ì§€</td><td class="sensor-val-level">1.8m</td><td><span class="tag normal">ì •ìƒ</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PAGE 2: Intelligent CCTV Monitoring -->
        <div id="page-cctv" class="page-container">
            <div class="cctv-page-layout">
                <!-- Center: Grid -->
                <div class="video-grid-container">
                    <div class="filter-bar">
                        <i class="fa-solid fa-filter" style="color:var(--primary)"></i>
                        <span style="font-weight:600; font-size:14px;">ê°ì‹œ í•„í„°:</span>
                        <select class="filter-select">
                            <option>ì „ì²´ ì§€ì—­</option>
                            <option>ì˜ì„±ì</option>
                            <option>ì•ˆê³„ë©´</option>
                            <option>ë´‰ì–‘ë©´</option>
                        </select>
                        <select class="filter-select">
                            <option>ì „ì²´ ëª©ì </option>
                            <option>ì¬ë‚œì¬í•´ ê°ì‹œ</option>
                            <option>ìƒí™œ ë°©ë²”</option>
                            <option>ì–´ë¦°ì´ ë³´í˜¸êµ¬ì—­</option>
                            <option>ì“°ë ˆê¸° íˆ¬ê¸° ë‹¨ì†</option>
                        </select>
                        <div style="margin-left:auto; display:flex; gap:10px;">
                            <button style="padding:8px 15px; background:var(--primary); color:white; border:none; border-radius:6px; font-weight:600; cursor:pointer;">4ë¶„í• </button>
                            <button style="padding:8px 15px; background:white; border:1px solid var(--border); border-radius:6px; cursor:pointer;">9ë¶„í• </button>
                        </div>
                    </div>

                    <div class="video-grid">
                        <!-- Simulated Feeds -->
                        <div class="video-feed selected" onclick="selectFeed(this, 'CAM-01: ì•ˆê³„ë©´ ìš©ê¸°ë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ì•ˆê³„-03 (ìš©ê¸°ë¦¬)</div>
                            <img src="https://images.unsplash.com/photo-1590247813693-5541d1c609fd?q=80&w=2009&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-02: ì˜ì„±ì ë‚¨ëŒ€ì²œ')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ì˜ì„±ì ë‚¨ëŒ€ì²œ ìˆ˜ìœ„ê³„</div>
                            <img src="https://images.unsplash.com/photo-1552590740-b6c89196b052?q=80&w=1780&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-03: ë´‰ì–‘ë©´ í™”ì „ë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ë´‰ì–‘-01 (í™”ì „ë¦¬)</div>
                            <img src="https://images.unsplash.com/photo-1444653389962-8149286c578a?q=80&w=2065&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-04: ì ê³¡ë©´ ì‚¬ì´Œë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ì ê³¡-02 (ì‚¬ì´Œë¦¬)</div>
                            <img src="https://images.unsplash.com/photo-1623861214152-70b54dfd9695?q=80&w=2072&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-05: ê¸ˆì„±ë©´ ëŒ€ë¦¬ë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ê¸ˆì„±-04 (ëŒ€ë¦¬ë¦¬ ì–´ë¦°ì´)</div>
                            <img src="https://images.unsplash.com/photo-1549646430-b46187747806?q=80&w=2069&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-06: ì˜¥ì‚°ë©´ ì •ìë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ì˜¥ì‚°-09 (ì •ìë¦¬)</div>
                            <img src="https://images.unsplash.com/photo-1587823568853-475304a9d702?q=80&w=1974&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-07: ë‹¤ì¸ë©´ ì„œë¦‰ë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ë‹¤ì¸-12 (ì„œë¦‰ë¦¬)</div>
                            <img src="https://images.unsplash.com/photo-1565514020175-9534a9990e4a?q=80&w=1935&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-08: ë‹¨ë°€ë©´ ì†ì•”ë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ë‹¨ë°€-10 (ì†ì•”ë¦¬)</div>
                            <img src="https://images.unsplash.com/photo-1518173946687-a4c8892bbd9f?q=80&w=1887&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                        <div class="video-feed" onclick="selectFeed(this, 'CAM-09: ë‹¨ë¶ë©´ ë…¸ì—°ë¦¬')">
                            <div class="feed-overlay"><span class="rec-dot"></span>ë‹¨ë¶-11 (ë…¸ì—°ë¦¬ ê³µì›)</div>
                            <img src="https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?q=80&w=2070&auto=format&fit=crop" class="feed-placeholder">
                        </div>
                    </div>
                </div>

                <!-- Right: Controller -->
                <div class="control-panel-side">
                    <h3 style="font-size:16px; margin-bottom:20px; font-weight:700;"><i class="fa-solid fa-gamepad" style="color:var(--primary)"></i> PTZ ì¹´ë©”ë¼ ì œì–´</h3>
                    
                    <div style="margin-bottom:20px; font-size:14px; color:var(--text-sub);">
                        ì„ íƒëœ ì¹´ë©”ë¼: <br><strong style="color:var(--text-main); font-size:16px;" id="selectedCamName">CAM-01: ì•ˆê³„ë©´ ìš©ê¸°ë¦¬</strong>
                    </div>

                    <div class="ptz-controller">
                        <div class="ptz-pad">
                            <div class="ptz-btn up"><i class="fa-solid fa-chevron-up"></i></div>
                            <div class="ptz-btn left"><i class="fa-solid fa-chevron-left"></i></div>
                            <div class="ptz-btn center"></div>
                            <div class="ptz-btn right"><i class="fa-solid fa-chevron-right"></i></div>
                            <div class="ptz-btn down"><i class="fa-solid fa-chevron-down"></i></div>
                        </div>
                        <div class="zoom-controls">
                            <button class="btn-zoom"><i class="fa-solid fa-magnifying-glass-minus"></i> ì¶•ì†Œ</button>
                            <button class="btn-zoom"><i class="fa-solid fa-magnifying-glass-plus"></i> í™•ëŒ€</button>
                        </div>
                    </div>

                    <h4 style="font-size:14px; margin-bottom:10px; font-weight:700;">ì§€ëŠ¥í˜• ë¶„ì„ ì´ë²¤íŠ¸</h4>
                    <div style="background:#f8fafc; padding:15px; border-radius:8px; border:1px solid var(--border); font-size:13px; height:200px; overflow-y:auto;">
                        <div style="margin-bottom:8px; border-bottom:1px solid #e2e8f0; padding-bottom:5px;">
                            <span style="color:var(--primary); font-weight:600;">[ê°ì²´ì¸ì‹]</span> ì‚¬ëŒ ê°ì§€<br>
                            <span style="color:#94a3b8; font-size:11px;">ì•ˆê³„-03 | 10:42:15</span>
                        </div>
                        <div style="margin-bottom:8px; border-bottom:1px solid #e2e8f0; padding-bottom:5px;">
                            <span style="color:var(--primary); font-weight:600;">[ê°ì²´ì¸ì‹]</span> ì°¨ëŸ‰ ì§„ì…<br>
                            <span style="color:#94a3b8; font-size:11px;">ë´‰ì–‘-01 | 10:41:20</span>
                        </div>
                        <div style="margin-bottom:8px; padding-bottom:5px;">
                            <span style="color:#3b82f6; font-weight:600;">[ìˆ˜ìœ„ê°ì‹œ]</span> ìˆ˜ìœ„ ì •ìƒ<br>
                            <span style="color:#94a3b8; font-size:11px;">ë‚¨ëŒ€ì²œ | 10:40:00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 3: Water Level -->
        <div id="page-water" class="page-container">
            <div style="padding: 30px;">
                <h2 style="margin-bottom: 20px; font-size: 24px;">í•˜ì²œ ë° ì €ìˆ˜ì§€ ìˆ˜ìœ„ ëª¨ë‹ˆí„°ë§</h2>
                
                <div class="level-cards">
                    <div class="level-card">
                        <div class="level-icon"><i class="fa-solid fa-water"></i></div>
                        <div>
                            <p style="color:var(--text-sub); font-size:14px;">í‰ê·  í•˜ì²œ ìˆ˜ìœ„</p>
                            <h3 style="font-size:24px; margin-top:5px;" class="sensor-val-level">1.2m</h3>
                        </div>
                    </div>
                    <div class="level-card">
                        <div class="level-icon" style="color:var(--primary); background:#f0fdf4;"><i class="fa-solid fa-cloud-rain"></i></div>
                        <div>
                            <p style="color:var(--text-sub); font-size:14px;">ì¼ì¼ ëˆ„ì  ê°•ìš°ëŸ‰</p>
                            <h3 style="font-size:24px; margin-top:5px;" class="sensor-val-rain">0.0mm</h3>
                        </div>
                    </div>
                    <div class="level-card">
                        <div class="level-icon" style="color:var(--accent); background:#fee2e2;"><i class="fa-solid fa-bell"></i></div>
                        <div>
                            <p style="color:var(--text-sub); font-size:14px;">í™ìˆ˜ ê²½ë³´ ë°œë ¹</p>
                            <h3 style="font-size:24px; margin-top:5px;" id="floodAlertStatus">í•´ì œ</h3>
                        </div>
                    </div>
                </div>

                <div class="water-chart-container">
                    <canvas id="waterChart"></canvas>
                </div>

                <div class="card">
                    <h3 style="margin-bottom:15px;">ì£¼ìš” ì§€ì ë³„ ì‹¤ì‹œê°„ í˜„í™©</h3>
                    <table>
                        <thead>
                            <tr><th>ì§€ì ëª…</th><th>ì„¤ì¹˜ ìœ„ì¹˜</th><th>í˜„ì¬ ìˆ˜ìœ„</th><th>ê²½ê³„ ìˆ˜ìœ„</th><th>ìƒíƒœ</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>ë‚¨ëŒ€ì²œ êµëŸ‰</td><td>ì˜ì„±ì ë‚¨ëŒ€ì²œ</td><td class="sensor-val-level">1.2m</td><td>3.5m</td><td><span class="tag normal status-tag">ì •ìƒ</span></td></tr>
                            <tr><td>ìœ„ì–‘ ì €ìˆ˜ì§€</td><td>ì•ˆê³„ë©´ ìœ„ì–‘ë¦¬</td><td class="sensor-val-level">2.1m</td><td>5.0m</td><td><span class="tag normal status-tag">ì •ìƒ</span></td></tr>
                            <tr><td>ì¡°ë¬¸êµ</td><td>ê¸ˆì„±ë©´ ëŒ€ë¦¬ë¦¬</td><td class="sensor-val-level">0.8m</td><td>4.0m</td><td><span class="tag normal status-tag">ì •ìƒ</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PAGE 4: Disaster Alert (SOP) -->
        <div id="page-alert" class="page-container">
            <div style="padding: 30px;">
                <h2 style="margin-bottom: 20px; font-size: 24px;">ì¬ë‚œ ì˜ˆë³´ ë° ê²½ë³´ ì‹œìŠ¤í…œ</h2>

                <!-- Emergency SOP Display (Visible only in emergency) -->
                <div id="emergencySOP" class="sop-container">
                    <h3 style="color:var(--accent); margin-bottom:15px; border-bottom:2px solid var(--accent); padding-bottom:10px;">
                        ğŸš¨ [ê¸´ê¸‰] í’ìˆ˜í•´ ì¬ë‚œ ëŒ€ì‘ í‘œì¤€ ë§¤ë‰´ì–¼ (SOP) ê°€ë™
                    </h3>
                    <div class="sop-flow">
                        <div class="sop-step active">
                            <h4>1ë‹¨ê³„: ìƒí™© ì¸ì§€</h4>
                            <p>IoT ì„¼ì„œ ì„ê³„ì¹˜ ì´ˆê³¼ ê°ì§€<br>CCTV ì˜ìƒ ë¶„ì„ ê²½ë³´</p>
                        </div>
                        <div class="sop-step active">
                            <h4>2ë‹¨ê³„: ìƒí™© ì „íŒŒ</h4>
                            <p>ìœ ê´€ê¸°ê´€(ì†Œë°©/ê²½ì°°) í•«ë¼ì¸<br>ì¬ë‚œë¬¸ì ê¸´ê¸‰ ë°œì†¡</p>
                        </div>
                        <div class="sop-step active">
                            <h4>3ë‹¨ê³„: ë¹„ìƒ ëŒ€ì‘</h4>
                            <p>ë°°ìˆ˜ íŒí”„ì¥ ì „ë©´ ê°€ë™<br>ì£¼ë¯¼ ëŒ€í”¼ ëª…ë ¹ í•˜ë‹¬</p>
                        </div>
                        <div class="sop-step">
                            <h4>4ë‹¨ê³„: ë³µêµ¬ ë° í•´ì œ</h4>
                            <p>í”¼í•´ í˜„í™© ì§‘ê³„<br>ìƒí™© ì¢…ë£Œ ì„ ì–¸</p>
                        </div>
                    </div>
                </div>

                <!-- Normal Operations -->
                <div class="alert-action-grid">
                    <div class="alert-box">
                        <h3 style="margin-bottom:15px;">ê¸°ìƒ íŠ¹ë³´ í˜„í™©</h3>
                        <div style="padding:15px; background:#f8fafc; border-radius:8px; margin-bottom:10px;">
                            <strong>í˜„ì¬ ë°œíš¨ì¤‘ì¸ íŠ¹ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</strong>
                            <p style="font-size:13px; color:var(--text-sub); margin-top:5px;">ê¸°ìƒì²­ ë°ì´í„° ì—°ë™: 2025-12-16 14:00 ê¸°ì¤€</p>
                        </div>
                        <button style="width:100%; padding:10px; background:var(--secondary); color:white; border:none; border-radius:6px; cursor:pointer;">ê¸°ìƒì²­ ìƒì„¸ì •ë³´ ë³´ê¸°</button>
                    </div>
                    <div class="alert-box">
                        <h3 style="margin-bottom:15px;">ì›í´ë¦­ ìƒí™© ì „íŒŒ</h3>
                        <textarea style="width:100%; height:80px; padding:10px; border:1px solid var(--border); border-radius:6px; margin-bottom:10px;" placeholder="ì „íŒŒí•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                        <div style="display:flex; gap:10px;">
                            <button style="flex:1; padding:10px; background:var(--primary); color:white; border:none; border-radius:6px; cursor:pointer;">ì¬ë‚œë¬¸ì ë°œì†¡</button>
                            <button style="flex:1; padding:10px; background:#3b82f6; color:white; border:none; border-radius:6px; cursor:pointer;">ë§ˆì„ë°©ì†¡ ì†¡ì¶œ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 5: Maintenance Report -->
        <div id="page-report" class="page-container">
            <div style="padding: 30px;">
                <h2 style="margin-bottom: 20px; font-size: 24px;">ìœ ì§€ê´€ë¦¬ ë° ìš´ì˜ ë³´ê³ ì„œ</h2>
                
                <div id="reportHeader" class="report-mode-badge report-normal">
                    <i class="fa-solid fa-clipboard-check"></i> í‰ì‹œ ì¼ì¼ ì ê²€ ëª¨ë“œ
                </div>

                <div class="card">
                    <div class="list-header">
                        <span id="reportTitle">CCTV ë° ì„¼ì„œ ì¼ì¼ ì ê²€ ì¼ì§€</span>
                        <div style="display:flex; gap:10px;">
                            <button style="padding:5px 10px; border:1px solid var(--border); background:white; border-radius:4px;">Excel ë‹¤ìš´ë¡œë“œ</button>
                            <button style="padding:5px 10px; border:1px solid var(--border); background:white; border-radius:4px;">ì¸ì‡„</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr><th>ì‹œê°„</th><th>êµ¬ë¶„</th><th>ìƒì„¸ ë‚´ìš©</th><th>ë‹´ë‹¹ì</th><th>ì²˜ë¦¬ê²°ê³¼</th></tr>
                        </thead>
                        <tbody id="reportTableBody">
                            <!-- Normal Data -->
                            <tr><td>09:00</td><td>ì •ê¸°ì ê²€</td><td>ì•ˆê³„ë©´ CCTV 5ê°œì†Œ í†µì‹  ì ê²€</td><td>ê¹€ì˜ì„±</td><td>ì–‘í˜¸</td></tr>
                            <tr><td>10:30</td><td>ì¥ì• ì²˜ë¦¬</td><td>ë´‰ì–‘-02 ì¹´ë©”ë¼ ì´ˆì  ì¡°ì •</td><td>ë°•ì•ˆì „</td><td>ì™„ë£Œ</td></tr>
                            <tr><td>13:00</td><td>ì‹œìŠ¤í…œ</td><td>ì„œë²„ ìŠ¤í† ë¦¬ì§€ ë°±ì—… ì ê²€</td><td>ìµœê´€ë¦¬</td><td>ì–‘í˜¸</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </main>

    <script>
        // 1. Clock Function
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('ko-KR', { hour12: false });
        }
        setInterval(updateClock, 1000);
        updateClock();

        // 2. Navigation Logic
        function showPage(pageId) {
            document.querySelectorAll('.page-container').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            document.getElementById('menu-' + pageId).classList.add('active');
        }

        // 3. CCTV Selection Logic
        function selectFeed(element, camName) {
            document.querySelectorAll('.video-feed').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            document.getElementById('selectedCamName').innerText = camName;
        }

        // 4. Chart.js Initialization
        let waterChart;
        function initChart() {
            const ctx = document.getElementById('waterChart').getContext('2d');
            waterChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00'],
                    datasets: [{
                        label: 'ë‚¨ëŒ€ì²œ ìˆ˜ìœ„ (m)',
                        data: [1.1, 1.2, 1.2, 1.1, 1.2, 1.2],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { min: 0, max: 5 } }
                }
            });
        }
        
        // Initial call
        window.onload = function() {
            initChart();
        };

        // 5. Emergency Simulation Logic
        let isEmergency = false;
        function toggleEmergency() {
            isEmergency = !isEmergency;
            const body = document.body;
            
            // Common Elements
            const statusBadge = document.getElementById('systemStatus');
            const rainAmount = document.getElementById('rainAmount');
            const rainTrend = document.getElementById('rainTrend');
            const waterLevel = document.getElementById('waterLevel');
            const disasterMarker = document.getElementById('disasterMarker');
            const aiStatus = document.getElementById('aiStatus');
            
            // Page Specific Elements
            const sensorValLevel = document.querySelectorAll('.sensor-val-level');
            const sensorValRain = document.querySelector('.sensor-val-rain');
            const statusTags = document.querySelectorAll('.status-tag');
            const floodAlertStatus = document.getElementById('floodAlertStatus');
            
            // Report Page Elements
            const reportHeader = document.getElementById('reportHeader');
            const reportTitle = document.getElementById('reportTitle');
            const reportBody = document.getElementById('reportTableBody');
            
            // Alert Page SOP
            const sopContainer = document.getElementById('emergencySOP');

            if (isEmergency) {
                // [ON] Emergency Mode
                body.classList.add('emergency-mode');
                statusBadge.style.background = '#fee2e2';
                statusBadge.style.color = '#991b1b';
                statusBadge.innerHTML = '<i class="fa-solid fa-triangle-exclamation"></i> í’ìˆ˜í•´ ê²½ë³´ ë°œë ¹';
                
                // Update Values
                rainAmount.innerText = "120.5mm";
                rainAmount.classList.add('danger-text');
                rainTrend.innerText = "â–² ê¸‰ê²©í•œ ìƒìŠ¹ (ìœ„í—˜)";
                rainTrend.style.color = "var(--accent)";
                waterLevel.innerText = "4.8m";
                waterLevel.classList.add('danger-text');
                
                disasterMarker.style.display = 'block';
                aiStatus.innerHTML = "<strong style='color:var(--accent)'>[ìœ„í—˜] ë‚¨ëŒ€ì²œ ë²”ëŒ í™•ë¥  85% ì˜ˆì¸¡.</strong><br>ì¦‰ì‹œ ëŒ€í”¼ ë°©ì†¡ ë° íŒí”„ì¥ ê°€ë™ í•„ìš”.";

                // Page 3: Water Level Updates
                if(sensorValRain) sensorValRain.innerText = "120.5mm";
                if(floodAlertStatus) { floodAlertStatus.innerText = "ì‹¬ê° (Red)"; floodAlertStatus.style.color = "var(--accent)"; }
                sensorValLevel.forEach(el => { el.innerText = "4.8m"; el.style.color = "var(--accent)"; });
                statusTags.forEach(el => { el.className = "tag danger status-tag"; el.innerText = "ìœ„í—˜"; });

                // Update Chart Data
                waterChart.data.datasets[0].data = [1.2, 2.5, 3.8, 4.5, 4.8, 4.9];
                waterChart.data.datasets[0].borderColor = '#E84638';
                waterChart.data.datasets[0].backgroundColor = 'rgba(232, 70, 56, 0.2)';
                waterChart.update();

                // Page 4: Show SOP
                if(sopContainer) sopContainer.style.display = "block";

                // Page 5: Report Swapping
                if(reportHeader) {
                    reportHeader.className = "report-mode-badge report-emergency";
                    reportHeader.innerHTML = "<i class='fa-solid fa-bolt'></i> ì¬ë‚œ ìƒí™© ì¡°ì¹˜ ì´ë ¥ (ì‹¤ì‹œê°„)";
                    reportTitle.innerText = "í’ìˆ˜í•´ ê¸´ê¸‰ ëŒ€ì‘ ì¡°ì¹˜ ë¡œê·¸";
                    reportBody.innerHTML = `
                        <tr style="background:#fee2e2; font-weight:bold;"><td>14:35</td><td>ìƒí™©ì „íŒŒ</td><td>ì „ êµ°ë¯¼ ì¬ë‚œë¬¸ì ë°œì†¡ (Code: R-01)</td><td>ìë™ë°œì†¡</td><td>ì™„ë£Œ</td></tr>
                        <tr style="background:#fff1f2;"><td>14:32</td><td>ë¹„ìƒëŒ€ì‘</td><td>ì•ˆê³„ ë°°ìˆ˜íŒí”„ì¥ ê°€ë™ ì‹œì‘</td><td>ê´€ì œì‹¤</td><td>ê°€ë™ì¤‘</td></tr>
                        <tr style="background:#fff1f2;"><td>14:30</td><td>ìƒí™©ì¸ì§€</td><td>ë‚¨ëŒ€ì²œ ìˆ˜ìœ„ ìœ„í—˜ìˆ˜ìœ„(4.5m) ë„ë‹¬ ê°ì§€</td><td>AIì‹œìŠ¤í…œ</td><td>ê²½ë³´</td></tr>
                    `;
                }

            } else {
                // [OFF] Normal Mode
                body.classList.remove('emergency-mode');
                statusBadge.style.background = '#dcfce7';
                statusBadge.style.color = '#166534';
                statusBadge.innerHTML = '<i class="fa-solid fa-circle-check"></i> ì •ìƒ ìš´ì˜ ì¤‘';

                rainAmount.innerText = "0.0mm";
                rainAmount.classList.remove('danger-text');
                rainTrend.innerText = "â–¼ í‰ë…„ ëŒ€ë¹„ ê±´ì¡°";
                rainTrend.style.color = "var(--primary)";
                waterLevel.innerText = "1.2m";
                waterLevel.classList.remove('danger-text');

                disasterMarker.style.display = 'none';
                aiStatus.innerText = "í˜„ì¬ ìœ„í—˜ ìš”ì¸ì´ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.";

                // Page 3 Reset
                if(sensorValRain) sensorValRain.innerText = "0.0mm";
                if(floodAlertStatus) { floodAlertStatus.innerText = "í•´ì œ"; floodAlertStatus.style.color = "var(--text-main)"; }
                sensorValLevel.forEach(el => { el.innerText = "1.2m"; el.style.color = "var(--text-main)"; });
                statusTags.forEach(el => { el.className = "tag normal status-tag"; el.innerText = "ì •ìƒ"; });

                // Reset Chart
                waterChart.data.datasets[0].data = [1.1, 1.2, 1.2, 1.1, 1.2, 1.2];
                waterChart.data.datasets[0].borderColor = '#3b82f6';
                waterChart.data.datasets[0].backgroundColor = 'rgba(59, 130, 246, 0.1)';
                waterChart.update();

                // Page 4 Hide SOP
                if(sopContainer) sopContainer.style.display = "none";

                // Page 5 Reset
                if(reportHeader) {
                    reportHeader.className = "report-mode-badge report-normal";
                    reportHeader.innerHTML = "<i class='fa-solid fa-clipboard-check'></i> í‰ì‹œ ì¼ì¼ ì ê²€ ëª¨ë“œ";
                    reportTitle.innerText = "CCTV ë° ì„¼ì„œ ì¼ì¼ ì ê²€ ì¼ì§€";
                    reportBody.innerHTML = `
                        <tr><td>09:00</td><td>ì •ê¸°ì ê²€</td><td>ì•ˆê³„ë©´ CCTV 5ê°œì†Œ í†µì‹  ì ê²€</td><td>ê¹€ì˜ì„±</td><td>ì–‘í˜¸</td></tr>
                        <tr><td>10:30</td><td>ì¥ì• ì²˜ë¦¬</td><td>ë´‰ì–‘-02 ì¹´ë©”ë¼ ì´ˆì  ì¡°ì •</td><td>ë°•ì•ˆì „</td><td>ì™„ë£Œ</td></tr>
                        <tr><td>13:00</td><td>ì‹œìŠ¤í…œ</td><td>ì„œë²„ ìŠ¤í† ë¦¬ì§€ ë°±ì—… ì ê²€</td><td>ìµœê´€ë¦¬</td><td>ì–‘í˜¸</td></tr>
                    `;
                }
            }
        }

        // Add CSS for animation dynamically
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes pulse { 0% { transform: scale(0.5); opacity: 1; } 100% { transform: scale(2); opacity: 0; } }
        `;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>
