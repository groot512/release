<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>의성군 스마트 재난안전 통합 관제 플랫폼</title>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* [Theme Variables] */
        :root {
            --primary: #008939;   /* 의성 그린 */
            --primary-dark: #00682b;
            --secondary: #2c3e50; /* 다크 네이비 */
            --accent: #E84638;    /* 경고 레드 */
            --bg-body: #f3f4f6;   /* 배경색 */
            --bg-card: #ffffff;   /* 카드 배경 */
            --text-main: #111827;
            --text-sub: #6b7280;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --sidebar-width: 260px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* [Sidebar] */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            padding: 25px 20px;
            z-index: 100;
            box-shadow: 2px 0 10px rgba(0,0,0,0.02);
        }

        .logo {
            font-size: 20px;
            font-weight: 800;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 50px;
            letter-spacing: -0.5px;
        }
        .logo i { font-size: 24px; }

        .menu-group { margin-bottom: 10px; }
        .menu-label { font-size: 11px; color: var(--text-sub); font-weight: 700; margin-bottom: 8px; padding-left: 10px; text-transform: uppercase; }

        .menu-item {
            padding: 12px 15px;
            border-radius: 12px;
            color: #4b5563;
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .menu-item:hover { background-color: #f0fdf4; color: var(--primary); transform: translateX(3px); }
        .menu-item.active { background-color: var(--primary); color: white; box-shadow: 0 4px 12px rgba(0, 137, 57, 0.25); }
        .menu-item i { width: 20px; text-align: center; }

        .emergency-trigger {
            margin-top: auto;
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            color: var(--accent);
            padding: 18px;
            border-radius: 16px;
            text-align: center;
            font-weight: 800;
            cursor: pointer;
            border: 1px solid #fca5a5;
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(232, 70, 56, 0.15);
            position: relative;
            overflow: hidden;
        }
        .emergency-trigger:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(232, 70, 56, 0.3); }
        .emergency-trigger::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.4) 0%, transparent 60%);
            opacity: 0; transition: 0.5s;
        }
        .emergency-trigger:active::after { opacity: 1; transform: scale(0.5); }
        .emergency-trigger.active { background: var(--accent); color: white; border-color: var(--accent); animation: pulse-red 2s infinite; }

        /* [Main Content] */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* [Header] */
        header {
            background: var(--bg-card);
            padding: 20px 30px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 80px;
        }

        .header-title h1 { font-size: 22px; font-weight: 800; color: #1e293b; letter-spacing: -0.5px; }
        .header-title p { font-size: 13px; color: var(--text-sub); margin-top: 4px; font-weight: 500; }

        .header-status { display: flex; gap: 25px; align-items: center; }
        .clock-widget { text-align: right; }
        .clock-time { font-weight: 800; font-size: 18px; color: #334155; font-family: 'Pretendard', sans-serif; }
        .clock-date { font-size: 12px; color: var(--text-sub); }

        .status-badge {
            padding: 8px 16px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 700;
            background: #dcfce7;
            color: var(--primary);
            display: flex; align-items: center; gap: 8px;
            border: 1px solid #bbf7d0;
        }

        .user-profile {
            width: 44px; height: 44px; border-radius: 50%;
            background: #f1f5f9; display: flex; align-items: center; justify-content: center;
            border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            cursor: pointer;
        }

        /* [Page Containers] */
        .page-container {
            flex: 1;
            display: none; /* Hidden by default */
            flex-direction: column;
            overflow-y: auto;
            padding: 30px;
            height: calc(100vh - 80px);
            background: #f8fafc;
        }
        .page-container.active { display: flex; animation: fadeIn 0.3s ease-out; }

        /* [Dashboard Grid] */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: 150px minmax(500px, auto) auto;
            gap: 24px;
            max-width: 1800px;
            margin: 0 auto;
            width: 100%;
        }

        .card {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 24px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(226, 232, 240, 0.8);
            transition: transform 0.2s;
        }
        .card:hover { border-color: #cbd5e1; }

        /* Stats */
        .stat-card { display: flex; flex-direction: column; justify-content: space-between; height: 100%; }
        .stat-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        .stat-icon { 
            width: 48px; height: 48px; 
            background: #f1f5f9; border-radius: 14px; 
            display: flex; align-items: center; justify-content: center;
            color: var(--primary); font-size: 20px; transition: 0.3s;
        }
        .stat-card:hover .stat-icon { background: var(--primary); color: white; transform: rotate(-10deg); }
        .stat-value { font-size: 32px; font-weight: 800; color: #1e293b; letter-spacing: -1px; }
        .stat-label { font-size: 14px; color: #64748b; font-weight: 600; }
        .stat-trend { font-size: 13px; color: var(--primary); font-weight: 700; margin-top: 8px; display: flex; align-items: center; gap: 4px; }

        /* Map */
        .map-card {
            grid-column: span 3;
            grid-row: span 2;
            position: relative;
            overflow: hidden;
            padding: 0;
            background: #eef2ff;
        }
        .map-frame {
            width: 100%; height: 100%;
            background-image: url('https://www.usc.go.kr/design/ko/img/content/tourmap_06.png'); 
            background-size: 95% auto;
            background-repeat: no-repeat;
            background-position: center;
            position: relative;
            transition: filter 0.5s;
        }
        .map-overlay-ui {
            position: absolute; top: 24px; left: 24px;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px; border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            backdrop-filter: blur(8px);
            z-index: 5; border: 1px solid rgba(255,255,255,0.5);
            min-width: 200px;
        }

        /* List & Table */
        .list-card { grid-column: span 1; grid-row: span 2; display: flex; flex-direction: column; }
        .table-card { grid-column: span 4; overflow-x: auto; }
        
        .list-header { font-weight: 800; font-size: 16px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; color: #334155; }
        
        .cctv-item {
            display: flex; align-items: center; gap: 15px; padding: 16px;
            background: #f8fafc; border-radius: 12px; margin-bottom: 12px;
            cursor: pointer; transition: 0.2s; border: 1px solid transparent;
        }
        .cctv-item:hover { background: white; border-color: var(--primary); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .cctv-thumb { width: 70px; height: 45px; background: #0f172a; border-radius: 8px; overflow: hidden; display: flex; align-items: center; justify-content: center; color: #94a3b8; font-size: 10px; font-weight: 700; }
        .cctv-info h4 { font-size: 14px; font-weight: 700; margin-bottom: 4px; color: #334155; }
        .cctv-info p { font-size: 12px; color: #64748b; }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; background: #22c55e; margin-left: auto; box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2); }

        table { width: 100%; border-collapse: separate; border-spacing: 0; font-size: 14px; }
        th { text-align: left; padding: 16px; color: #64748b; border-bottom: 2px solid #e2e8f0; font-weight: 600; background: #f8fafc; }
        td { padding: 16px; border-bottom: 1px solid #f1f5f9; color: #334155; font-weight: 500; }
        tr:last-child td { border-bottom: none; }
        
        .tag { padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 700; display: inline-block; }
        .tag.normal { background: #dcfce7; color: #166534; }
        .tag.warning { background: #ffedd5; color: #9a3412; }
        .tag.danger { background: #fee2e2; color: #991b1b; }

        /* [Page: CCTV Monitoring] */
        .cctv-layout { display: grid; grid-template-columns: 1fr 340px; height: 100%; gap: 24px; overflow: hidden; }
        .video-wall { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; overflow-y: auto; padding-right: 10px; }
        .video-feed {
            background: #000; aspect-ratio: 16/9; border-radius: 12px; position: relative; overflow: hidden;
            border: 3px solid transparent; transition: 0.2s; cursor: pointer;
        }
        .video-feed:hover, .video-feed.selected { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(0, 137, 57, 0.2); }
        .feed-overlay { position: absolute; top: 12px; left: 12px; color: white; font-size: 13px; font-weight: 600; text-shadow: 0 2px 4px rgba(0,0,0,0.8); z-index: 2; display: flex; align-items: center; gap: 6px; }
        .rec-dot { width: 8px; height: 8px; background: #ef4444; border-radius: 50%; animation: blink 1s infinite; }
        .ptz-panel { background: white; border-radius: 20px; padding: 24px; border: 1px solid var(--border); display: flex; flex-direction: column; }
        
        .ptz-pad {
            width: 140px; height: 140px; background: #f1f5f9; border-radius: 50%; margin: 20px auto; position: relative;
            box-shadow: inset 0 4px 10px rgba(0,0,0,0.05); border: 1px solid #e2e8f0;
        }
        .ptz-btn {
            position: absolute; width: 36px; height: 36px; background: white; border-radius: 50%;
            border: 1px solid #cbd5e1; display: flex; align-items: center; justify-content: center;
            cursor: pointer; color: #64748b; transition: 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .ptz-btn:hover { background: var(--primary); color: white; border-color: var(--primary); transform: scale(1.1); }
        .ptz-btn:active { transform: scale(0.95); }
        .ptz-btn.up { top: 8px; left: 50%; transform: translateX(-50%); }
        .ptz-btn.down { bottom: 8px; left: 50%; transform: translateX(-50%); }
        .ptz-btn.left { left: 8px; top: 50%; transform: translateY(-50%); }
        .ptz-btn.right { right: 8px; top: 50%; transform: translateY(-50%); }
        .ptz-btn.center { top: 50%; left: 50%; transform: translate(-50%, -50%); width: 44px; height: 44px; background: #cbd5e1; color: white; border: none; }

        /* [Page: Water & SOP] */
        .level-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 24px; }
        .level-card { background: white; padding: 24px; border-radius: 16px; border: 1px solid var(--border); display: flex; align-items: center; gap: 20px; }
        .level-icon { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; }

        .sop-flow { display: flex; gap: 16px; margin-top: 20px; }
        .sop-step {
            flex: 1; background: white; padding: 24px; border-radius: 12px; border: 1px solid var(--border);
            position: relative; opacity: 0.4; transition: 0.5s; transform: translateY(10px);
        }
        .sop-step.active { border: 2px solid var(--accent); opacity: 1; transform: translateY(0); box-shadow: 0 10px 25px rgba(232, 70, 56, 0.15); }
        .sop-step h4 { font-size: 16px; font-weight: 800; margin-bottom: 8px; color: #1e293b; }
        
        /* [Animations] */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(232, 70, 56, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(232, 70, 56, 0); } 100% { box-shadow: 0 0 0 0 rgba(232, 70, 56, 0); } }
        @keyframes blink { 50% { opacity: 0.5; } }

        /* [Emergency Mode Overrides] */
        body.emergency-mode .status-badge { background: #fee2e2; color: #991b1b; animation: blink 1s infinite; border-color: #fca5a5; }
        body.emergency-mode .map-frame { filter: sepia(30%) hue-rotate(-30deg) saturate(150%); }
        body.emergency-mode .stat-value.danger-text { color: var(--accent); }
        body.emergency-mode .emergency-trigger { background: #b91c1c; box-shadow: inset 0 0 20px rgba(0,0,0,0.2); }

        /* Responsive */
        @media (max-width: 1400px) { .dashboard-grid { grid-template-columns: repeat(2, 1fr); } .map-card { grid-column: span 2; } .table-card { grid-column: span 2; } .video-wall { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 1024px) { .sidebar { display: none; } .dashboard-grid { display: flex; flex-direction: column; } .cctv-layout { grid-template-columns: 1fr; } .ptz-panel { display: none; } }
    </style>
</head>
<body>

    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="logo">
            <i class="fa-solid fa-shield-halved"></i> Smart Uiseong
        </div>
        
        <div class="menu-group">
            <div class="menu-label">Main Dashboard</div>
            <div class="menu-item active" id="menu-home" onclick="showPage('home')">
                <i class="fa-solid fa-chart-pie"></i> 통합 관제 상황판
            </div>
            <div class="menu-item" id="menu-cctv" onclick="showPage('cctv')">
                <i class="fa-solid fa-video"></i> 지능형 CCTV 모니터링
            </div>
        </div>

        <div class="menu-group">
            <div class="menu-label">Disaster & Safety</div>
            <div class="menu-item" id="menu-water" onclick="showPage('water')">
                <i class="fa-solid fa-water"></i> 하천/저수지 수위
            </div>
            <div class="menu-item" id="menu-alert" onclick="showPage('alert')">
                <i class="fa-solid fa-triangle-exclamation"></i> 재난 예보 및 SOP
            </div>
        </div>

        <div class="menu-group">
            <div class="menu-label">Management</div>
            <div class="menu-item" id="menu-report" onclick="showPage('report')">
                <i class="fa-solid fa-file-contract"></i> 유지관리 보고서
            </div>
        </div>
        
        <div class="emergency-trigger" onclick="toggleEmergency()">
            <i class="fa-solid fa-bell"></i> 재난 시뮬레이션
            <div style="font-size: 11px; font-weight: 500; margin-top: 5px; opacity: 0.8;">Click to Simulate</div>
        </div>
    </nav>

    <!-- Main Application -->
    <main class="main">
        <!-- Top Header -->
        <header>
            <div class="header-title">
                <h1>디지털트윈 기반 스마트재난안전관리 플랫폼</h1>
                <p>Uiseong-gun Smart Disaster Safety Management System</p>
            </div>
            <div class="header-status">
                <div class="clock-widget">
                    <div class="clock-time" id="clock">00:00:00</div>
                    <div class="clock-date">2025년 12월 16일 화요일</div>
                </div>
                <div class="status-badge" id="systemStatus">
                    <i class="fa-solid fa-circle-check"></i> 시스템 정상 가동
                </div>
                <div class="user-profile">
                    <i class="fa-solid fa-user" style="color: #94a3b8;"></i>
                </div>
            </div>
        </header>

        <!-- PAGE 1: Integrated Dashboard (Home) -->
        <div id="page-home" class="page-container active">
            <div class="dashboard-grid">
                <!-- Stats Cards -->
                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">기상청 연동 (의성읍)</span>
                        <div class="stat-icon"><i class="fa-solid fa-cloud-sun"></i></div>
                    </div>
                    <div class="stat-value" id="weatherTemp">24.5°C</div>
                    <div class="stat-trend">강수확률 10% • 습도 45%</div>
                </div>

                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">실시간 강우량 (평균)</span>
                        <div class="stat-icon" style="color:#3b82f6; background:#eff6ff;"><i class="fa-solid fa-umbrella"></i></div>
                    </div>
                    <div class="stat-value" id="rainAmount">0.0mm</div>
                    <div class="stat-trend" id="rainTrend">▼ 평년 대비 건조</div>
                </div>

                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">남대천 수위 현황</span>
                        <div class="stat-icon" style="color:#3b82f6; background:#eff6ff;"><i class="fa-solid fa-water"></i></div>
                    </div>
                    <div class="stat-value" id="waterLevel">1.2m</div>
                    <div class="stat-trend">관심단계(3.5m) 이하 안정</div>
                </div>

                <div class="card stat-card">
                    <div class="stat-header">
                        <span class="stat-label">CCTV 가동률</span>
                        <div class="stat-icon" style="color:var(--primary); background:#f0fdf4;"><i class="fa-solid fa-video"></i></div>
                    </div>
                    <div class="stat-value">100%</div>
                    <div class="stat-trend">장애 0건 / 총 839대</div>
                </div>

                <!-- Digital Twin Map -->
                <div class="card map-card">
                    <div class="map-frame">
                        <!-- Markers -->
                        <div style="position: absolute; top: 48%; left: 45%; transform: translate(-50%, -50%); text-align: center;">
                             <i class="fa-solid fa-building-columns" style="font-size: 24px; color: var(--primary); filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));"></i>
                             <div style="background: white; padding: 2px 8px; border-radius: 6px; font-size: 11px; font-weight: 800; margin-top: 4px; border:1px solid #ddd; box-shadow:0 2px 4px rgba(0,0,0,0.1);">의성군청</div>
                        </div>
                        <div id="disasterMarker" style="position: absolute; top: 52%; left: 48%; display: none;">
                            <div style="width: 100px; height: 100px; background: rgba(232, 70, 56, 0.4); border-radius: 50%; animation: pulse-red 1.5s infinite; position: absolute; top:50%; left:50%; transform:translate(-50%, -50%);"></div>
                            <i class="fa-solid fa-water" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; color: var(--accent); z-index:2; text-shadow: 0 2px 5px rgba(0,0,0,0.3);"></i>
                        </div>
                    </div>
                    <div class="map-overlay-ui">
                        <h4 style="font-size: 14px; margin-bottom: 8px; color:#1e293b; font-weight:800;">AI 예측 시뮬레이션</h4>
                        <p id="aiStatus" style="font-size: 13px; color: #64748b; line-height:1.4;">현재 위험 요인이 감지되지 않았습니다.<br>예측 모델: Normal-Mode v2.5</p>
                    </div>
                </div>

                <!-- Right Side List -->
                <div class="card list-card">
                    <div class="list-header">
                        <span>주요 감시 구역</span>
                        <span style="font-size: 12px; color: var(--primary); cursor: pointer;" onclick="showPage('cctv')">+ 더보기</span>
                    </div>
                    <div style="overflow-y: auto; flex:1;">
                        <div class="cctv-item" onclick="showPage('cctv')">
                            <div class="cctv-thumb">LIVE</div>
                            <div class="cctv-info"><h4>안계-03 (용기리)</h4><p>방범용 • 정상 녹화</p></div>
                            <div class="status-dot"></div>
                        </div>
                        <div class="cctv-item" onclick="showPage('cctv')">
                            <div class="cctv-thumb">LIVE</div>
                            <div class="cctv-info"><h4>봉양-01 (화전리)</h4><p>재난감시 • 수위 체크</p></div>
                            <div class="status-dot"></div>
                        </div>
                        <div class="cctv-item" onclick="showPage('cctv')">
                            <div class="cctv-thumb">LIVE</div>
                            <div class="cctv-info"><h4>점곡-02 (사촌리)</h4><p>산불감시 • 열화상</p></div>
                            <div class="status-dot"></div>
                        </div>
                         <div class="cctv-item" onclick="showPage('cctv')">
                            <div class="cctv-thumb">LIVE</div>
                            <div class="cctv-info"><h4>금성-04 (대리리)</h4><p>어린이보호 • 속도</p></div>
                            <div class="status-dot"></div>
                        </div>
                    </div>
                </div>

                <!-- Bottom Table -->
                <div class="card table-card">
                    <div class="list-header">
                        <span>IoT 센서 실시간 데이터 (10분 주기 갱신)</span>
                        <button style="border:none; background:none; color:#64748b; font-size:12px; cursor:pointer;"><i class="fa-solid fa-rotate-right"></i> 데이터 갱신</button>
                    </div>
                    <table>
                        <thead>
                            <tr><th>센서 ID</th><th>설치 위치</th><th>센서 유형</th><th>현재 측정값</th><th>상태</th><th>최종 통신</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>UIS-IOT-001</td><td>안계면 위양리 479-2</td><td>강우량계</td><td class="sensor-val">0mm/h</td><td><span class="tag normal status-tag">정상</span></td><td>10초 전</td></tr>
                            <tr><td>UIS-IOT-024</td><td>봉양면 화전리 115-2</td><td>하천수위계</td><td class="sensor-val-level">1.15m</td><td><span class="tag normal status-tag">정상</span></td><td>30초 전</td></tr>
                            <tr><td>UIS-IOT-056</td><td>의성읍 남대천 교량</td><td>수위감지</td><td class="sensor-val-level">1.8m</td><td><span class="tag normal status-tag">정상</span></td><td>즉시</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- PAGE 2: Intelligent CCTV -->
        <div id="page-cctv" class="page-container">
            <div class="cctv-layout">
                <div class="video-wall">
                    <div class="video-feed selected" onclick="selectCam('CAM-01: 안계면 용기리', this)">
                        <div class="feed-overlay"><span class="rec-dot"></span>안계-03 (용기리)</div>
                        <img src="https://images.unsplash.com/photo-1590247813693-5541d1c609fd?q=80&w=2009&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;">
                    </div>
                    <div class="video-feed" onclick="selectCam('CAM-02: 의성읍 남대천', this)">
                        <div class="feed-overlay"><span class="rec-dot"></span>의성읍 남대천</div>
                        <img src="https://images.unsplash.com/photo-1552590740-b6c89196b052?q=80&w=1780&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;">
                    </div>
                    <div class="video-feed" onclick="selectCam('CAM-03: 봉양면 화전리', this)">
                        <div class="feed-overlay"><span class="rec-dot"></span>봉양-01 (화전리)</div>
                        <img src="https://images.unsplash.com/photo-1444653389962-8149286c578a?q=80&w=2065&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;">
                    </div>
                    <!-- Additional Feeds -->
                    <div class="video-feed"><div class="feed-overlay"><span class="rec-dot"></span>점곡-02 (사촌리)</div><img src="https://images.unsplash.com/photo-1623861214152-70b54dfd9695?q=80&w=2072&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;"></div>
                    <div class="video-feed"><div class="feed-overlay"><span class="rec-dot"></span>금성-04 (대리리)</div><img src="https://images.unsplash.com/photo-1549646430-b46187747806?q=80&w=2069&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;"></div>
                    <div class="video-feed"><div class="feed-overlay"><span class="rec-dot"></span>옥산-09 (정자리)</div><img src="https://images.unsplash.com/photo-1587823568853-475304a9d702?q=80&w=1974&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;"></div>
                    <div class="video-feed"><div class="feed-overlay"><span class="rec-dot"></span>다인-12 (서릉리)</div><img src="https://images.unsplash.com/photo-1565514020175-9534a9990e4a?q=80&w=1935&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;"></div>
                    <div class="video-feed"><div class="feed-overlay"><span class="rec-dot"></span>단밀-10 (속암리)</div><img src="https://images.unsplash.com/photo-1518173946687-a4c8892bbd9f?q=80&w=1887&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;"></div>
                    <div class="video-feed"><div class="feed-overlay"><span class="rec-dot"></span>단북-11 (노연리)</div><img src="https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?q=80&w=2070&auto=format&fit=crop" style="width:100%; height:100%; object-fit:cover; opacity:0.8;"></div>
                </div>
                
                <div class="ptz-panel">
                    <h3 style="font-size:16px; font-weight:700; color:#1e293b; margin-bottom:20px;">
                        <i class="fa-solid fa-gamepad" style="color:var(--primary); margin-right:8px;"></i>PTZ 카메라 제어
                    </h3>
                    <div style="background:#f8fafc; padding:12px; border-radius:8px; border:1px solid #e2e8f0; margin-bottom:20px;">
                        <div style="font-size:12px; color:#64748b; margin-bottom:4px;">Target Camera</div>
                        <div style="font-weight:700; color:#334155;" id="selectedCamName">CAM-01: 안계면 용기리</div>
                    </div>
                    
                    <div class="ptz-pad">
                        <div class="ptz-btn up"><i class="fa-solid fa-chevron-up"></i></div>
                        <div class="ptz-btn left"><i class="fa-solid fa-chevron-left"></i></div>
                        <div class="ptz-btn center"><i class="fa-solid fa-expand"></i></div>
                        <div class="ptz-btn right"><i class="fa-solid fa-chevron-right"></i></div>
                        <div class="ptz-btn down"><i class="fa-solid fa-chevron-down"></i></div>
                    </div>
                    
                    <h4 style="font-size:14px; margin-top:30px; margin-bottom:10px; font-weight:700;">지능형 분석 이벤트</h4>
                    <div style="flex:1; background:#f8fafc; border-radius:12px; border:1px solid #e2e8f0; padding:15px; overflow-y:auto;">
                        <div style="margin-bottom:10px; border-bottom:1px solid #e2e8f0; padding-bottom:8px;">
                            <span style="color:var(--primary); font-weight:700; font-size:12px;">[객체인식]</span> 사람 감지<br>
                            <span style="color:#94a3b8; font-size:11px;">안계-03 | 10:42:15</span>
                        </div>
                        <div style="margin-bottom:10px; border-bottom:1px solid #e2e8f0; padding-bottom:8px;">
                            <span style="color:var(--accent); font-weight:700; font-size:12px;">[위험감지]</span> 제한구역 침입<br>
                            <span style="color:#94a3b8; font-size:11px;">남대천 | 10:41:20</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAGE 3: Water Level & Charts -->
        <div id="page-water" class="page-container">
            <h2 style="font-size:24px; font-weight:800; color:#1e293b; margin-bottom:20px;">하천 및 저수지 수위 모니터링</h2>
            
            <div class="level-cards">
                <div class="level-card">
                    <div class="level-icon" style="background:#eff6ff; color:#3b82f6;"><i class="fa-solid fa-water"></i></div>
                    <div>
                        <p style="color:#64748b; font-size:13px; font-weight:600;">평균 하천 수위</p>
                        <h3 style="font-size:28px; font-weight:800; color:#1e293b; margin-top:4px;" class="sensor-val-level">1.2m</h3>
                    </div>
                </div>
                <div class="level-card">
                    <div class="level-icon" style="background:#f0fdf4; color:var(--primary);"><i class="fa-solid fa-cloud-rain"></i></div>
                    <div>
                        <p style="color:#64748b; font-size:13px; font-weight:600;">일일 누적 강우량</p>
                        <h3 style="font-size:28px; font-weight:800; color:#1e293b; margin-top:4px;" class="sensor-val-rain">0.0mm</h3>
                    </div>
                </div>
                <div class="level-card">
                    <div class="level-icon" style="background:#fee2e2; color:var(--accent);"><i class="fa-solid fa-bell"></i></div>
                    <div>
                        <p style="color:#64748b; font-size:13px; font-weight:600;">홍수 경보 단계</p>
                        <h3 style="font-size:28px; font-weight:800; color:#1e293b; margin-top:4px;" id="floodAlertStatus">정상 (Green)</h3>
                    </div>
                </div>
            </div>

            <div style="background:white; padding:24px; border-radius:20px; border:1px solid var(--border); margin-bottom:24px;">
                <h3 style="font-size:16px; font-weight:700; margin-bottom:20px;">남대천 수위 변화 추이</h3>
                <div style="height:350px;"><canvas id="waterChart"></canvas></div>
            </div>
        </div>

        <!-- PAGE 4: Alert SOP -->
        <div id="page-alert" class="page-container">
            <h2 style="font-size:24px; font-weight:800; color:#1e293b; margin-bottom:10px;">재난 예보 및 대응 절차 (SOP)</h2>
            <p style="color:#64748b; margin-bottom:30px;">기상 특보 발령 시 자동으로 활성화되는 재난 대응 매뉴얼입니다.</p>

            <div id="emergencySOP" style="display:none;">
                <div style="background:#fee2e2; border-left:5px solid var(--accent); padding:20px; border-radius:8px; margin-bottom:30px;">
                    <h3 style="color:#991b1b; font-size:18px; font-weight:800; display:flex; align-items:center; gap:10px;">
                        <i class="fa-solid fa-circle-exclamation"></i> [긴급] 풍수해 재난 대응 매뉴얼 가동 중
                    </h3>
                    <p style="color:#7f1d1d; margin-top:5px;">현재 남대천 수위가 위험 단계에 도달하여 '심각' 단계 조치가 진행 중입니다.</p>
                </div>
                <div class="sop-flow">
                    <div class="sop-step active">
                        <div style="background:var(--accent); color:white; width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; margin-bottom:10px;">1</div>
                        <h4>상황 인지</h4><p>IoT 센서 임계치 초과<br>CCTV 영상 자동 분석</p>
                    </div>
                    <div class="sop-step active">
                        <div style="background:var(--accent); color:white; width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; margin-bottom:10px;">2</div>
                        <h4>상황 전파</h4><p>유관기관 핫라인 연결<br>재난문자 긴급 발송</p>
                    </div>
                    <div class="sop-step active">
                        <div style="background:var(--accent); color:white; width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; margin-bottom:10px;">3</div>
                        <h4>비상 대응</h4><p>배수펌프장 전면 가동<br>주민 대피 명령</p>
                    </div>
                    <div class="sop-step">
                        <div style="background:#cbd5e1; color:white; width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:800; margin-bottom:10px;">4</div>
                        <h4>복구/해제</h4><p>피해 현황 집계<br>상황 종료 선언</p>
                    </div>
                </div>
            </div>

            <div id="normalSOP">
                <div style="background:#f0fdf4; border:1px solid #bbf7d0; padding:40px; border-radius:16px; text-align:center;">
                    <i class="fa-solid fa-shield-cat" style="font-size:40px; color:var(--primary); margin-bottom:20px;"></i>
                    <h3 style="color:#166534; font-size:20px; font-weight:700;">현재 발효 중인 재난 특보가 없습니다.</h3>
                    <p style="color:#15803d; margin-top:10px;">시스템이 24시간 실시간 감시 모드로 작동 중입니다.</p>
                </div>
            </div>
        </div>

        <!-- PAGE 5: Report -->
        <div id="page-report" class="page-container">
            <h2 style="font-size:24px; font-weight:800; color:#1e293b; margin-bottom:20px;">유지관리 및 운영 보고서</h2>
            
            <div class="card">
                <div class="list-header" style="background:#f8fafc; padding:20px; border-radius:12px 12px 0 0; border-bottom:1px solid #e2e8f0; margin: -24px -24px 20px -24px;">
                    <span id="reportTitle"><i class="fa-solid fa-clipboard-check" style="margin-right:8px; color:var(--primary);"></i> CCTV 및 센서 일일 점검 일지</span>
                    <button style="padding:8px 16px; background:white; border:1px solid #cbd5e1; border-radius:6px; font-weight:600; cursor:pointer;">Excel 다운로드</button>
                </div>
                <table>
                    <thead>
                        <tr><th>시간</th><th>구분</th><th>상세 내용</th><th>담당자</th><th>처리결과</th></tr>
                    </thead>
                    <tbody id="reportTableBody">
                        <tr><td>09:00</td><td><span class="tag normal">정기점검</span></td><td>안계면 CCTV 5개소 통신 점검</td><td>김의성</td><td>양호</td></tr>
                        <tr><td>10:30</td><td><span class="tag warning">장애처리</span></td><td>봉양-02 카메라 초점 조정</td><td>박안전</td><td>완료</td></tr>
                        <tr><td>13:00</td><td><span class="tag normal">시스템</span></td><td>서버 스토리지 백업 점검</td><td>최관리</td><td>양호</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <script>
        // [Init]
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('ko-KR', { hour12: false });
        }
        setInterval(updateClock, 1000);
        updateClock();

        // [Navigation]
        function showPage(pageId) {
            document.querySelectorAll('.page-container').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            document.getElementById('menu-' + pageId).classList.add('active');
        }

        // [CCTV Logic]
        function selectCam(name, el) {
            document.querySelectorAll('.video-feed').forEach(e => e.classList.remove('selected'));
            el.classList.add('selected');
            document.getElementById('selectedCamName').innerText = name;
        }

        // [Chart.js]
        let waterChart;
        window.onload = function() {
            const ctx = document.getElementById('waterChart').getContext('2d');
            waterChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00'],
                    datasets: [{
                        label: '남대천 수위 (m)',
                        data: [1.1, 1.2, 1.2, 1.1, 1.2, 1.2],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        fill: true, tension: 0.4, borderWidth: 3
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { min: 0, max: 5, grid: { borderDash: [5, 5] } }, x: { grid: { display: false } } }
                }
            });
        };

        // [Simulation Logic]
        let isEmergency = false;
        function toggleEmergency() {
            isEmergency = !isEmergency;
            const body = document.body;
            const statusBadge = document.getElementById('systemStatus');
            const rainAmount = document.getElementById('rainAmount');
            const rainTrend = document.getElementById('rainTrend');
            const waterLevel = document.getElementById('waterLevel');
            const disasterMarker = document.getElementById('disasterMarker');
            const aiStatus = document.getElementById('aiStatus');
            const sensorValLevel = document.querySelectorAll('.sensor-val-level');
            const sensorValRain = document.querySelector('.sensor-val-rain');
            const statusTags = document.querySelectorAll('.status-tag');
            const floodAlertStatus = document.getElementById('floodAlertStatus');
            const sopContainer = document.getElementById('emergencySOP');
            const normalSOP = document.getElementById('normalSOP');
            const triggerBtn = document.querySelector('.emergency-trigger');
            const reportTitle = document.getElementById('reportTitle');
            const reportBody = document.getElementById('reportTableBody');

            if (isEmergency) {
                // [ON] Emergency
                body.classList.add('emergency-mode');
                triggerBtn.classList.add('active');
                statusBadge.style.background = '#fee2e2';
                statusBadge.style.color = '#991b1b';
                statusBadge.style.borderColor = '#fca5a5';
                statusBadge.innerHTML = '<i class="fa-solid fa-triangle-exclamation"></i> 풍수해 경보 발령';
                
                rainAmount.innerText = "120.5mm";
                rainAmount.style.color = "var(--accent)";
                rainTrend.innerText = "▲ 급격한 상승 (위험)";
                rainTrend.style.color = "var(--accent)";
                waterLevel.innerText = "4.8m";
                waterLevel.style.color = "var(--accent)";
                
                disasterMarker.style.display = 'block';
                aiStatus.innerHTML = "<strong style='color:var(--accent)'>[위험] 남대천 범람 확률 92% 예측.</strong><br>즉시 주민 대피 방송 송출 권고.";

                if(sensorValRain) sensorValRain.innerText = "120.5mm";
                if(floodAlertStatus) { floodAlertStatus.innerText = "심각 (Red)"; floodAlertStatus.style.color = "var(--accent)"; }
                sensorValLevel.forEach(el => { el.innerText = "4.8m"; el.style.color = "var(--accent)"; });
                statusTags.forEach(el => { el.className = "tag danger status-tag"; el.innerText = "위험"; });

                waterChart.data.datasets[0].data = [1.2, 2.5, 3.8, 4.5, 4.8, 4.9];
                waterChart.data.datasets[0].borderColor = '#E84638';
                waterChart.data.datasets[0].backgroundColor = 'rgba(232, 70, 56, 0.2)';
                waterChart.update();

                if(sopContainer) sopContainer.style.display = "block";
                if(normalSOP) normalSOP.style.display = "none";

                if(reportTitle) {
                    reportTitle.innerHTML = "<i class='fa-solid fa-bolt' style='margin-right:8px; color:var(--accent);'></i> 재난 상황 조치 이력 (실시간)";
                    reportBody.innerHTML = `
                        <tr style="background:#fee2e2;"><td>14:35</td><td><span class="tag danger">상황전파</span></td><td>전 군민 재난문자 발송 (Code: R-01)</td><td>시스템</td><td>완료</td></tr>
                        <tr style="background:#fff1f2;"><td>14:32</td><td><span class="tag warning">비상대응</span></td><td>안계 배수펌프장 가동 시작</td><td>관제실</td><td>가동중</td></tr>
                        <tr style="background:#fff1f2;"><td>14:30</td><td><span class="tag danger">상황인지</span></td><td>남대천 수위 위험수위(4.5m) 도달</td><td>AI</td><td>경보</td></tr>
                    `;
                }

            } else {
                // [OFF] Normal
                body.classList.remove('emergency-mode');
                triggerBtn.classList.remove('active');
                statusBadge.style.background = '#dcfce7';
                statusBadge.style.color = '#166534';
                statusBadge.style.borderColor = '#bbf7d0';
                statusBadge.innerHTML = '<i class="fa-solid fa-circle-check"></i> 시스템 정상 가동';

                rainAmount.innerText = "0.0mm";
                rainAmount.style.color = "#1e293b";
                rainTrend.innerText = "▼ 평년 대비 건조";
                rainTrend.style.color = "var(--primary)";
                waterLevel.innerText = "1.2m";
                waterLevel.style.color = "#1e293b";
                
                disasterMarker.style.display = 'none';
                aiStatus.innerHTML = "현재 위험 요인이 감지되지 않았습니다.<br>예측 모델: Normal-Mode v2.5";

                if(sensorValRain) sensorValRain.innerText = "0.0mm";
                if(floodAlertStatus) { floodAlertStatus.innerText = "정상 (Green)"; floodAlertStatus.style.color = "#1e293b"; }
                sensorValLevel.forEach(el => { el.innerText = "1.2m"; el.style.color = "#1e293b"; });
                statusTags.forEach(el => { el.className = "tag normal status-tag"; el.innerText = "정상"; });

                waterChart.data.datasets[0].data = [1.1, 1.2, 1.2, 1.1, 1.2, 1.2];
                waterChart.data.datasets[0].borderColor = '#3b82f6';
                waterChart.data.datasets[0].backgroundColor = 'rgba(59, 130, 246, 0.1)';
                waterChart.update();

                if(sopContainer) sopContainer.style.display = "none";
                if(normalSOP) normalSOP.style.display = "block";

                if(reportTitle) {
                    reportTitle.innerHTML = "<i class='fa-solid fa-clipboard-check' style='margin-right:8px; color:var(--primary);'></i> CCTV 및 센서 일일 점검 일지";
                    reportBody.innerHTML = `
                        <tr><td>09:00</td><td><span class="tag normal">정기점검</span></td><td>안계면 CCTV 5개소 통신 점검</td><td>김의성</td><td>양호</td></tr>
                        <tr><td>10:30</td><td><span class="tag warning">장애처리</span></td><td>봉양-02 카메라 초점 조정</td><td>박안전</td><td>완료</td></tr>
                        <tr><td>13:00</td><td><span class="tag normal">시스템</span></td><td>서버 스토리지 백업 점검</td><td>최관리</td><td>양호</td></tr>
                    `;
                }
            }
        }
    </script>
</body>
</html>